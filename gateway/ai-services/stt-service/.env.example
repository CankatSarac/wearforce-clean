# STT Service Configuration

# Service Settings
SERVICE_NAME=stt-service
HOST=0.0.0.0
PORT=8001
DEBUG=false

# Processing Mode
PROCESSING_MODE=hybrid  # online, offline, hybrid
ENABLE_GRPC=true
GRPC_PORT=9001

# Whisper Configuration
WHISPER_MODEL_SIZE=base.en
WHISPER_COMPUTE_TYPE=float16
WHISPER_THREADS=4
WHISPER_DEVICE=cuda  # cpu, cuda

# Model Paths (for offline processing)
WHISPER_MODELS_DIR=/app/models
WHISPER_MODEL_PATH=/app/models/ggml-base.en.bin

# Audio Processing
MAX_AUDIO_SIZE=52428800  # 50MB in bytes
SUPPORTED_AUDIO_FORMATS=wav,mp3,m4a,flac,ogg,webm
TARGET_SAMPLE_RATE=16000

# Connection Management
MAX_CONNECTIONS=100
MAX_BUFFER_SIZE=1048576  # 1MB per connection

# Database Configuration
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=wearforce

# Redis Configuration  
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_MAX_CONNECTIONS=20

# CORS Settings
CORS_ORIGINS=*
CORS_ALLOW_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_PER_MINUTE=60

# Health Checks
HEALTH_CHECK_INTERVAL=30

# Monitoring
METRICS_ENABLED=true
METRICS_PORT=8000

# Logging
LOG_LEVEL=INFO
LOG_STRUCTURED=true

# External Services (for online mode)
OPENAI_API_KEY=
OPENAI_MODEL=whisper-1
AZURE_SPEECH_KEY=
AZURE_SPEECH_REGION=
GOOGLE_CLOUD_SPEECH_CREDENTIALS=

# Fallback Configuration
ENABLE_FALLBACK=true
FALLBACK_ORDER=whisper-cpp,faster-whisper,openai-whisper,openai-api

# Performance Tuning
ENABLE_VAD=true
ENABLE_NOISE_REDUCTION=true
ENABLE_AUDIO_OPTIMIZATION=true
STREAMING_CHUNK_SIZE=4096
STREAMING_OVERLAP_SIZE=1024

# Security
ENABLE_AUDIO_VALIDATION=true
MAX_SESSION_DURATION=3600  # 1 hour in seconds
CLEANUP_INTERVAL=60  # seconds

# Development
ENABLE_AUDIO_LOGGING=false  # Log audio data for debugging
ENABLE_PERFORMANCE_PROFILING=false